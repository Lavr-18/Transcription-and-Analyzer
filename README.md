# Transcription and Analyzer

## 📌 Обзор
**Transcription and Analyzer** — это автоматизированный пайплайн для обработки аудиофайлов, их транскрибации и детального анализа.  
Проект создан с использованием **Python** и **Docker**, что позволяет легко развернуть его и управлять им на любом сервере.

Пайплайн автоматизирует следующие шаги:
1. **Получение аудиофайлов** — автоматически загружает новые аудиофайлы из указанного источника.  
2. **Транскрибация** — расшифровывает аудиозаписи с помощью API от OpenAI.  
3. **Анализ** — извлекает ключевую информацию из текста.  
4. **Экспорт данных** — сохраняет результаты анализа в файл **Excel** для дальнейшего использования.  

Весь процесс работает по расписанию с помощью **Cron**, что обеспечивает регулярное и автономное выполнение.

---

## 🔑 Возможности
- **Полностью автоматизирован** — работает по расписанию без ручного вмешательства.  
- **Docker-контейнеризация** — проект упакован в контейнер для стабильной и изолированной среды выполнения.  
- **Детальное логирование** — все операции фиксируются в логах для мониторинга и отладки.  
- **Автоматическая очистка** — удаление старых файлов для экономии дискового пространства.  
- **API-интеграция** — использует OpenAI API для транскрибации и анализа.  
- **Экспорт в Excel** — результаты сохраняются в `.xlsx`-файл в удобном формате.  

---

## 🚀 Установка и запуск

### 1. Предварительные требования
- Установленные **Docker** и **Docker Compose**.  
- Установленный **Git**.  
- Ключ API от **OpenAI**.  

### 2. Клонирование репозитория
```bash
git clone https://github.com/Lavr-18/Transcription-and-Analyzer.git
cd Transcription-and-Analyzer
```

### 3. Настройка переменных окружения
Создайте файл `.env` в корневой директории проекта:
```bash
nano .env
```
Добавьте ваш ключ API и другие настройки:
```ini
OPENAI_API_KEY=ваш_ключ_openai_здесь
```

### 4. Сборка Docker-образа
Используйте docker-compose для сборки:
```bash
docker-compose build transcription_bot
```

### 5. Ручной запуск скрипта (по желанию)
Для проверки корректности работы:
```bash
docker-compose run --rm transcription_bot python main.py
```

### 6. Настройка расписания (Cron)
Откройте конфигурацию crontab:
```bash
crontab -e
```
Добавьте задачи для запуска скрипта в **12:00, 15:00 и 19:00 по МСК**  
(соответствует **09:00, 12:00, 16:00 по UTC**):
```bash
# Запуск в 12:00, 15:00, 19:00 по МСК (09:00, 12:00, 16:00 по UTC)
0 9 * * * cd /root/transcription_project && /usr/local/bin/docker-compose run --rm transcription_bot python main.py >> /root/transcription_project/cron.log 2>&1
0 12 * * * cd /root/transcription_project && /usr/local/bin/docker-compose run --rm transcription_bot python main.py >> /root/transcription_project/cron.log 2>&1
0 16 * * * cd /root/transcription_project && /usr/local/bin/docker-compose run --rm transcription_bot python main.py >> /root/transcription_project/cron.log 2>&1
```
Теперь пайплайн будет запускаться автоматически.

---

## 📂 Структура проекта
```bash
.
├── audio/             # Директория для входящих аудиофайлов
├── Dockerfile         # Определяет Docker-образ
├── docker-compose.yml # Конфигурация Docker
├── main.py            # Основной скрипт пайплайна
├── requirements.txt   # Зависимости Python
├── .env               # Переменные окружения (приватные)
├── cron.log           # Логи Cron-заданий
├── transcripts/       # Транскрибированный текст
└── analyses/          # Результаты анализа
```
---
